{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { Fragment, useState } from 'react';\nimport Link from 'next/link';\nimport useSWR from 'swr';\nimport { Accordion, Button, Card } from 'react-bootstrap';\n\nvar PrimaryElections = function PrimaryElections(props) {\n  var _useState = useState(true),\n      isOpen = _useState[0],\n      setIsOpen = _useState[1];\n\n  var address = JSON.parse(window.localStorage.getItem('address'));\n  var id = window.localStorage.getItem('id');\n  var url = \"/api/voterInfo?id=\".concat(id, \"&address=\").concat(address);\n\n  var fetcher = function fetcher(url) {\n    return fetch(url).then(function (r) {\n      return r.json();\n    });\n  };\n\n  var _useSWR = useSWR(url, fetcher),\n      data = _useSWR.data,\n      error = _useSWR.error;\n\n  if (error) return __jsx(\"div\", {\n    className: \"alert alert-danger\",\n    role: \"alert\"\n  }, __jsx(\"span\", {\n    className: \"sr-only\"\n  }, \"Failed to load data!\"));\n  if (!data) return __jsx(\"div\", {\n    className: \"spinner-border spinner-border-lg text-danger\",\n    role: \"status\",\n    style: {\n      margin: '10rem',\n      width: '20rem',\n      height: '20rem'\n    }\n  });\n\n  if (data && data !== null & !data.data.contests || data.data.contests.length <= 0 || data.data.contests === null) {\n    return __jsx(Card, {\n      bg: \"success\",\n      className: \"mb-3 shadow text-white\"\n    }, __jsx(Card.Header, null, __jsx(\"h3\", {\n      className: \"m-3 font-weight-bold\"\n    }, \"Attention: Primary elections not found in database\")), __jsx(Card.Body, null, __jsx(\"h5\", {\n      className: \"m-3\"\n    }, \"If you are aware of an upcoming election, please contact your state's election office to ask for more info\"), __jsx(Link, {\n      href: \"https://www.usa.gov/election-office\"\n    }, __jsx(\"a\", {\n      className: \"m-3 font-weight-bold\",\n      style: {\n        textTransform: 'uppercase',\n        color: 'black'\n      },\n      target: \"_blank\"\n    }, __jsx(\"div\", {\n      className: \"text-center\"\n    }, __jsx(\"i\", {\n      className: \"fas fa-info-circle fa-2x\"\n    }), \" \\xA0Click here to search for your state\\xA0\", ' ', __jsx(\"i\", {\n      className: \"fas fa-question-circle fa-2x\"\n    }))))));\n  }\n\n  if (data && data !== null) {\n    var contests = data.data.contests;\n    var primaryElections = [];\n    contests.map(function (contest) {\n      if (contest.type === 'Primary') {\n        primaryElections.push(contest);\n      }\n    });\n\n    var handleIsOpen = function handleIsOpen() {\n      return setIsOpen(!isOpen);\n    }; // console.log(primaryElections);\n\n\n    return __jsx(Accordion, {\n      defaultActiveKey: \"0\",\n      onClick: handleIsOpen\n    }, __jsx(Card, {\n      className: \"mb-3 shadow\"\n    }, __jsx(Accordion.Toggle, {\n      as: Card.Header,\n      eventKey: \"0\",\n      style: {\n        cursor: 'pointer'\n      }\n    }, __jsx(\"h3\", {\n      className: \"card-header bg-primary text-white\"\n    }, __jsx(\"span\", {\n      className: \"text-left\"\n    }, \"Upcoming Primary Election(s)\"), __jsx(\"span\", {\n      className: \"float-right\"\n    }, isOpen && __jsx(\"i\", {\n      className: \"fas fa-times-circle\"\n    }), !isOpen && __jsx(\"i\", {\n      className: \"fas fa-plus-circle\"\n    })))), __jsx(Accordion.Collapse, {\n      eventKey: \"0\"\n    }, __jsx(Card.Body, null, __jsx(\"table\", {\n      className: \"table table-striped table-hover\"\n    }, primaryElections.length > 0 && __jsx(\"caption\", null, \"List of primary election contests in your area\"), primaryElections.length <= 0 && __jsx(\"caption\", null, \"No primary election info found\"), primaryElections.length > 0 && __jsx(Fragment, null, __jsx(\"thead\", {\n      style: {\n        fontFamily: 'Space Mono, sans-serif'\n      }\n    }, __jsx(\"tr\", null, __jsx(\"th\", {\n      scope: \"col\",\n      style: {\n        width: '10px'\n      }\n    }, \"#\"), __jsx(\"th\", {\n      scope: \"col\"\n    }, \"Office\"), __jsx(\"th\", {\n      scope: \"col\"\n    }, \"District\"), __jsx(\"th\", {\n      scope: \"col\"\n    }, \"Scope\")), __jsx(\"tr\", null, __jsx(\"th\", {\n      scope: \"col\"\n    }), __jsx(\"th\", {\n      scope: \"col\"\n    }, \"Candidates\"), __jsx(\"th\", {\n      scope: \"col\"\n    }, \"Partisan Affiliation\"), __jsx(\"th\", {\n      scope: \"col\"\n    }, \"Jurisdiction\"))), __jsx(\"tbody\", null, primaryElections.map(function (election, idx) {\n      return __jsx(Fragment, {\n        key: idx\n      }, __jsx(\"tr\", {\n        className: \"font-weight-bold\"\n      }, __jsx(\"td\", {\n        style: {\n          width: '10px',\n          verticalAlign: 'middle'\n        }\n      }, __jsx(\"b\", null, idx + 1)), __jsx(\"td\", null, election.office), __jsx(\"td\", null, election.district.name), __jsx(\"td\", null, election.district.scope)), __jsx(\"tr\", null, __jsx(\"td\", null), __jsx(\"td\", null, election.candidates.map(function (item, idx) {\n        return __jsx(\"div\", {\n          key: idx\n        }, item.name);\n      })), __jsx(\"td\", null, election.candidates.map(function (item, idx) {\n        return __jsx(\"div\", {\n          key: idx\n        }, item.party);\n      })), __jsx(\"td\", null, election.level.map(function (item, idx) {\n        return __jsx(\"div\", {\n          key: idx\n        }, item);\n      }))));\n    }))))))));\n  }\n};\n\nexport default PrimaryElections;","map":null,"metadata":{},"sourceType":"module"}